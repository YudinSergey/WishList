(this.webpackJsonpwishlist2=this.webpackJsonpwishlist2||[]).push([[0],{30:function(e,t,r){},34:function(e,t,r){},36:function(e,t,r){},37:function(e,t,r){},38:function(e,t,r){},39:function(e,t,r){},41:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){},47:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(18),a=r.n(c),i=r(4),s=r(5),o=r(7),l=r(6),u=(r(30),r(25)),h=r(3),d=r(11),p=(r(34),r(1)),m=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){return""!=this.props.store.firstname?Object(p.jsxs)("header",{className:"header header_authorized container",children:[Object(p.jsx)("div",{className:"header__menu",children:Object(p.jsx)("a",{href:"",className:"header__menu-item",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0436\u0435\u043b\u0430\u043d\u0438\u0439"})}),Object(p.jsxs)("a",{href:"",className:"header__username",children:[Object(p.jsx)("p",{className:"header__firstname",children:this.props.store.firstname}),Object(p.jsx)("p",{className:"header__lastname",children:this.props.store.lastname})]})]}):Object(p.jsxs)("header",{className:"header header_not-authorized container",children:[Object(p.jsx)("p",{className:"gretting-text",children:"\u041f\u0440\u0438\u0432\u0435\u0442!"}),Object(p.jsx)("p",{className:"gretting-text",children:"\u0422\u044b \u043f\u043e\u043f\u0430\u043b \u0432 \u043c\u0438\u0440, \u0433\u0434\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u0436\u0435\u043b\u0430\u043d\u0438\u044f! \u0422\u044b \u0433\u043e\u0442\u043e\u0432?"}),Object(p.jsx)("p",{className:"gretting-text",children:"\u0422\u043e\u0433\u0434\u0430 \u043f\u043e\u0435\u0445\u0430\u043b\u0438:)"})]})}}]),r}(n.Component),f=Object(d.b)((function(e){return{store:e.profileReducer}}))(m),j=(r(36),function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).cleanFieldError=function(e){e.target.classList.contains("form-field__error")&&(e.target.classList.remove("form-field__error"),e.target.parentElement.children[1].textContent="")},e}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props,t=e.name,r=e.placeholder,n=e.type,c=e.castomClass;return Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("p",{className:"form-field__name",children:t}),Object(p.jsxs)("div",{className:"form-field__container "+c,children:[Object(p.jsx)("input",{placeholder:r,type:n,className:"form-field__value",onClick:this.cleanFieldError}),Object(p.jsx)("p",{className:"form-field__error-text"})]})]})}}]),r}(n.Component)),b=(r(37),r(38),r(39),function(e){var t=e.name,r=e.borderModificator,n=e.colorModificator,c=e.action;return Object(p.jsx)("a",{href:"",onClick:c,className:"button button_"+r+" button_"+n,children:t})}),v=r(13),O=r.n(v),g=r(17),x=function e(){var t=this;Object(i.a)(this,e),this.onRegistration=function(){var e=Object(g.a)(O.a.mark((function e(r,n,c,a){var i,s,o,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={lastname:n,firstname:r,email:c,password:a},s="reg",o=JSON.stringify(i),e.next=5,fetch("".concat(t._apiBase).concat(s),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:o});case 5:if((l=e.sent).ok){e.next=16;break}if(409!=l.status){e.next=11;break}return e.abrupt("return","the specified email is already in use");case 11:if(422!=l.status){e.next=15;break}return e.abrupt("return","the specified email is not correct");case 15:throw new Error("Could not fetch ".concat(s,"; recived ").concat(l.status));case 16:return e.next=18,l;case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e)})));return function(t,r,n,c){return e.apply(this,arguments)}}(),this.onAuthorization=function(){var e=Object(g.a)(O.a.mark((function e(r,n){var c,a,i,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={login:r,password:n},a="auth",i=JSON.stringify(c),e.next=5,fetch("".concat(t._apiBase).concat(a),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:i});case 5:if((s=e.sent).ok){e.next=16;break}if(404!=s.status){e.next=11;break}return e.abrupt("return","this account is not found");case 11:if(409!=s.status){e.next=15;break}return e.abrupt("return","this password is wrong");case 15:throw new Error("Could not fetch ".concat(a,"; recived ").concat(s.status));case 16:return e.next=18,s.json();case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.createWish=function(){var e=Object(g.a)(O.a.mark((function e(r){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="addwish",e.next=3,fetch("".concat(t._apiBase).concat(n),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:r});case 3:if((c=e.sent).ok){e.next=6;break}throw new Error("Could not fetch ".concat(n,"; recived ").concat(c.status));case 6:return e.next=8,c.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getWish=Object(g.a)(O.a.mark((function e(){var r,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="getwishes",e.next=3,fetch("".concat(t._apiBase).concat(r),{method:"GET"});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Could not fetch ".concat(r,"; recived ").concat(n.status));case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),this._apiBase="http://localhost:8080/"},y=function(e){return e.includes("@")&&(e.includes("mail")||e.includes("yandex"))&&(e.includes(".ru")||e.includes(".com"))},w=function(e){return{type:"CHANGE-ALL-PROFILE_ATTRIBUTES",value:e}},S=(r(41),function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).WishListService=new x,e.state={isRegistred:!1},e.changerFrom=function(t){t.preventDefault(),e.cleanFieldErrorAll(),e.setState({isRegistred:0==e.state.isRegistred})},e.cleanFieldErrorAll=function(){for(var e=document.querySelectorAll(".form-field__error"),t=0;t<e.length;t++)e[t].classList.remove("form-field__error"),e[t].parentElement.children[1].textContent=""},e.onRegistration=function(t){t.preventDefault(),y(document.querySelector(".reg-login").children[0].value)||e.registrationResultProcessing("the specified email is not correct"),e.WishListService.onRegistration(document.querySelector(".reg-name").children[0].value,document.querySelector(".reg-lastname").children[0].value,document.querySelector(".reg-login").children[0].value,document.querySelector(".reg-password").children[0].value).then(e.registrationResultProcessing)},e.onAuthorization=function(t){t.preventDefault(),e.WishListService.onAuthorization(document.querySelector(".auth-login").children[0].value,document.querySelector(".auth-password").children[0].value).then(e.authResultProcessing)},e.registrationResultProcessing=function(e){"the specified email is already in use"==e?(document.querySelector(".reg-login").children[0].value="",document.querySelector(".reg-login").children[1].textContent="\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430 \u0443\u0436\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f",document.querySelector(".reg-login").children[0].classList.add("form-field__error")):"the specified email is not correct"==e&&(document.querySelector(".reg-login").children[0].value="",document.querySelector(".reg-login").children[1].textContent="\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0432 \u0441\u0435\u0431\u044f \u043a\u043e\u043c\u0431\u0438\u043d\u0430\u0446\u0438\u044e \u0431\u0443\u043a\u0432 \u0438 \u0446\u0438\u0444\u0440, \u0437\u043d\u0430\u0447\u043e\u043a @ \u0438 \u0434\u043e\u043c\u0435\u043d \u043f\u043e\u0447\u0442\u043e\u0432\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430",document.querySelector(".reg-login").children[0].classList.add("form-field__error"))},e.authResultProcessing=function(t){if(void 0!=t.firstname){var r={token:"",avatar:null,email:t.login,firstname:t.firstname,lastname:t.lastname,patronymic:null,gender:null};e.props.dispatch(w(r))}else"this account is not found"==t?(document.querySelector(".auth-login").children[0].value="",document.querySelector(".auth-login").children[1].textContent="\u0410\u043a\u043a\u0430\u0443\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",document.querySelector(".auth-login").children[0].classList.add("form-field__error")):"this password is wrong"==t&&(document.querySelector(".auth-password").children[0].value="",document.querySelector(".auth-password").children[1].textContent="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",document.querySelector(".auth-password").children[0].classList.add("form-field__error"))},e}return Object(s.a)(r,[{key:"render",value:function(){var e=Object(p.jsxs)("div",{className:"authAndRegForm",children:[Object(p.jsx)("div",{className:"headline-half form-half",children:Object(p.jsx)("h3",{className:"form-headline",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(p.jsxs)("div",{className:"main-lalf form-half",children:[Object(p.jsx)(j,{name:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 email",type:"text",castomClass:"auth-login",onClick:this.cleanFieldError}),Object(p.jsx)(j,{name:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",placeholder:"\u0421\u0435\u043a\u0440\u0435\u0442",type:"password",castomClass:"auth-password",onClick:this.cleanFieldError}),Object(p.jsxs)("div",{className:"form-actions",children:[Object(p.jsx)(b,{name:"\u0412\u043e\u0439\u0442\u0438",borderModificator:"round-border",colorModificator:"light-purple",action:this.onAuthorization}),Object(p.jsx)(b,{name:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",borderModificator:"round-border",colorModificator:"light-purple",action:this.changerFrom})]})]})]}),t=Object(p.jsxs)("div",{className:"authAndRegForm",children:[Object(p.jsx)("div",{className:"headline-half form-half",children:Object(p.jsx)("h3",{className:"form-headline",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(p.jsxs)("div",{className:"main-lalf form-half",children:[Object(p.jsx)(j,{name:"\u0418\u043c\u044f",placeholder:"\u0418\u043c\u044f",type:"text",castomClass:"reg-name",onClick:this.cleanFieldError}),Object(p.jsx)(j,{name:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",type:"text",castomClass:"reg-lastname",onClick:this.cleanFieldError}),Object(p.jsx)(j,{name:"\u041b\u043e\u0433\u0438\u043d",placeholder:"\u041b\u043e\u0433\u0438\u043d",type:"text",castomClass:"reg-login",onClick:this.cleanFieldError}),Object(p.jsx)(j,{name:"\u041f\u0430\u0440\u043e\u043b\u044c",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",castomClass:"reg-password",onClick:this.cleanFieldError}),Object(p.jsx)("div",{className:"form-actions",children:Object(p.jsx)(b,{name:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",borderModificator:"round-border",colorModificator:"light-purple",action:this.onRegistration})}),Object(p.jsx)("a",{className:"authAndRegForm__to-login-link",href:"#",onClick:this.changerFrom,children:"\u0423 \u043c\u0435\u043d\u044f \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})]})]});return 1==this.state.isRegistred?t:e}}]),r}(n.Component)),k=Object(d.b)((function(e){return{store:e}}))(S),C=function(e){return{type:"UPDATE_WISHES",value:e}},_=function(e){return{type:"ADD_WISH",value:e}},N=(r(42),function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).WishListService=new x,e.createWish=function(t){t.preventDefault(),e.WishListService.createWish(JSON.stringify({name:document.querySelector(".wish-name").children[0].value,description:document.querySelector(".wish-description").children[0].value,link:"url",instruction:document.querySelector(".wish-instruction").children[0].value,price:+document.querySelector(".wish-price").children[0].value,picture:document.querySelector(".wish-picture-link").children[0].value,author:e.props.store.lastname+" "+e.props.store.firstname,category:document.querySelector(".wish-category").children[0].value})),e.props.dispatch(_({name:document.querySelector(".wish-name").children[0].value,description:document.querySelector(".wish-description").children[0].value,link:"url",instruction:document.querySelector(".wish-instruction").children[0].value,price:+document.querySelector(".wish-price").children[0].value,picture:document.querySelector(".wish-picture-link").children[0].value,author:e.props.store.lastname+" "+e.props.store.firstname,category:document.querySelector(".wish-category").children[0].value}))},e}return Object(s.a)(r,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"create-wish-form",children:[Object(p.jsx)(j,{name:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0436\u0435\u043b\u0430\u043d\u0438\u044f:",placeholder:"",type:"text",castomClass:"wish-name",onClick:this.cleanFieldError}),Object(p.jsx)(j,{name:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443:",placeholder:"",type:"text",castomClass:"wish-picture-link",onClick:this.cleanFieldError}),Object(p.jsx)(j,{name:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0436\u0435\u043b\u0430\u043d\u0438\u044f:",placeholder:"",type:"text",castomClass:"wish-description",onClick:this.cleanFieldError}),Object(p.jsx)(j,{name:"\u041a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0438\u0442\u044c:",placeholder:"",type:"text",castomClass:"wish-instruction",onClick:this.cleanFieldError}),Object(p.jsx)(j,{name:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f:",placeholder:"",type:"text",castomClass:"wish-category",onClick:this.cleanFieldError}),Object(p.jsx)(j,{name:"\u041f\u0440\u0438\u043c\u0435\u0440\u043d\u0430\u044f \u0446\u0435\u043d\u0430:",placeholder:"",type:"text",castomClass:"wish-price",onClick:this.cleanFieldError}),Object(p.jsxs)("artivle",{className:"create-wish-form__manage-section",children:[Object(p.jsx)(b,{name:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",borderModificator:"round-border",colorModificator:"light-purple",action:this.createWish}),Object(p.jsx)(b,{name:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",borderModificator:"round-border",colorModificator:"light-purple",action:""})]})]})}}]),r}(n.Component)),E=Object(d.b)((function(e){return{store:e.profileReducer}}))(N),q=(r(43),function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){return console.log(this.props),Object(p.jsxs)("div",{className:"wish",style:{backgroundImage:"url('"+this.props.picture+"')"},children:[Object(p.jsx)("article",{className:"wishName",children:this.props.name}),Object(p.jsx)("article",{className:"wishDescription",children:Object(p.jsx)("p",{children:this.props.description})}),Object(p.jsxs)("article",{className:"wishAttributes",children:[Object(p.jsxs)("p",{className:"wish-author",children:["\u0410\u0432\u0442\u043e\u0440: ",this.props.author]}),Object(p.jsxs)("p",{className:"wishCategory",children:["\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f: ",this.props.category]}),Object(p.jsxs)("p",{className:"wish-price",children:["\u0426\u0435\u043d\u0430: ",this.props.price]}),Object(p.jsx)("a",{className:"wish-link",href:this.props.link,children:"\u0421\u0441\u044b\u043b\u043a\u0430"})]})]})}}]),r}(n.Component)),F=(r(44),function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).WishListService=new x,e.updateWishes=function(t){console.log(t),e.props.dispatch(C(t))},e.renderWishes=function(e){return console.log(e),e.map((function(e){return Object(p.jsx)(q,{name:e.name,description:e.description,author:e.author,price:e.price,category:e.category,picture:e.picture})}))},e}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.WishListService.getWish().then(this.updateWishes),console.log(this.props.wishStore.wishes)}},{key:"render",value:function(){var e=this.renderWishes(this.props.wishStore.wishes);return console.log(e),Object(p.jsxs)("div",{className:"wish-list container",children:[Object(p.jsx)(b,{name:"\u041d\u043e\u0432\u043e\u0435 \u0436\u0435\u043b\u0430\u043d\u0438\u0435",borderModificator:"round-border",colorModificator:"light-purple",action:""}),Object(p.jsx)(E,{}),e]})}}]),r}(n.Component)),A=Object(d.b)((function(e){return{store:e.profileReducer,wishStore:e.wishesReducer}}))(F),R=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).WishListService=new x,e}return Object(s.a)(r,[{key:"render",value:function(){var e=this;return Object(p.jsx)("div",{className:"App container",children:Object(p.jsxs)(u.a,{children:[Object(p.jsx)(f,{}),Object(p.jsx)(h.b,{path:"/",render:function(t){return""!=e.props.store.firstname?Object(p.jsx)(h.a,{to:{pathname:"wishlist"}}):Object(p.jsx)(k,{})},exact:!0}),Object(p.jsx)(h.b,{path:"/wishlist",render:function(e){return Object(p.jsx)(A,{})}})]})})}}]),r}(n.Component);var L=Object(d.b)((function(e){return{store:e.profileReducer}}),(function(e){return{}}))(R),W=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,48)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;r(e),n(e),c(e),a(e),i(e)}))},T=r(24),M=r(14),P={token:"",avatar:null,email:null,firstname:"",lastname:"",patronymic:null,gender:null},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE-ALL-PROFILE_ATTRIBUTES":return Object(M.a)(Object(M.a)({},e),{},{token:t.value.token,avatar:t.value.avatar,email:t.value.email,firstname:t.value.firstname,lastname:t.value.lastname,patronymic:t.value.patronymic,gender:t.value.gender});case"LOGOUT":return P;default:return e}},I={wishes:[]},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_WISHES":return Object(M.a)(Object(M.a)({},e),{},{wishes:t.value});case"ADD_WISH":var r=e;return r.wishes.push(t.value),Object(M.a)(Object(M.a)({},e),{},{newState:r});default:return e}},z=Object(T.a)({profileReducer:D,wishesReducer:B}),H=Object(T.b)(z);a.a.render(Object(p.jsx)(d.a,{store:H,children:Object(p.jsx)(L,{})}),document.getElementById("root")),W()}},[[47,1,2]]]);
//# sourceMappingURL=main.c3fc4e0d.chunk.js.map